var game = {
    clickerButton: document.createElement ("button"),
    upgradeButton: document.createElement ("button"),
    coalMeter: document.createElement ("p"),
    gemMeter: document.createElement ("p"),
    CPSMeter: document.createElement ("p"),

    coal: 0,
    gems: 0,

    clicksPerSecond: 0,
};

function addMineral () {
    if (Math.floor(Math.random () * 101) < 1) {
	game.gems++;
    } else {
	game.coal++;
    }
    // Also update the text labels.
    game.coalMeter.innerHTML = "Coal: " + game.coal;
    game.gemMeter.innerHTML = "Gems: " + game.gems;
}

function upgradeCPS () {
    if (game.coal >= Math.pow (10, game.clicksPerSecond + 1)) {
	game.coal -= Math.pow (10, game.clicksPerSecond + 1);
	game.coalMeter.innerHTML = "Coal: " + game.coal;
	++game.clicksPerSecond;
	game.CPSMeter.innerHTML = "Clicks per second: " + game.clicksPerSecond;
    }
}

function start () {
    // The actual clicker part.
	game.clickerButton.id = "rock-button";
    game.clickerButton.onclick = addMineral;
    document.body.appendChild (game.clickerButton);

    // Displays.
    game.coalMeter.innerHTML = "Coal: " + game.coal;
    game.gemMeter.innerHTML = "Gems: " + game.gems;
    game.CPSMeter.innerHTML = "Clicks per second: " + game.clicksPerSecond;
    document.body.appendChild (game.coalMeter);
    document.body.appendChild (game.gemMeter);
    document.body.appendChild (game.CPSMeter);

    // Upgrades.
    game.upgradeButton.innerHTML = "Upgrade CPS";
    game.upgradeButton.onclick = upgradeCPS;
    document.body.appendChild (game.upgradeButton);

    // Fix the interval. Or leave it be. LOL
    setInterval (function () { for (i = 0; i < game.clicksPerSecond; ++i) { addMineral () } }, 1000);
}
